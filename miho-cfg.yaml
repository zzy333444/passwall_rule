# æœºåœºè®¢é˜…
proxy-providers:
    Airport1:
        url: "xx"
        type: http
        interval: 86400
        health-check:
            enable: true
            url: https://www.gstatic.com/generate_204
            interval: 200
        proxy: ğŸ‡¨ğŸ‡³ ç›´è¿

# èŠ‚ç‚¹ä¿¡æ¯
proxies:
    - { name: ğŸ‡¨ğŸ‡³ ç›´è¿, type: direct, udp: true }

# å…¨å±€é…ç½®
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: "*"
ipv6: false
unified-delay: true
tcp-concurrent: true
log-level: warning
# æ ¹æ®è¿›ç¨‹æ¥åšåˆ†æµã€‚è½¯è·¯ç”±ä¸æ”¯æŒ
# find-process-mode: 'off'
# interface-name: en0
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
profile:
    store-selected: true
    store-fake-ip: true

# å…¥ç«™
tun:
    enable: true
    # system/gvisor/mixed
    stack: mixed
    dns-hijack: ["any:53", "tcp://any:53"]
    auto-route: true
    auto-redirect: true
    auto-detect-interface: true

# DNSæ¨¡å—
dns:
    enable: true
    listen: 0.0.0.0:1053
    ipv6: false
    respect-rules: true
    enhanced-mode: fake-ip
    fake-ip-range: 28.0.0.1/8
    fake-ip-filter-mode: blacklist
    fake-ip-filter:
        - "rule-set:private_domain,cn_domain,china_only"
        - "+.services.googleapis.cn"
        - "+.xn--ngstr-lra8j.com"
        - "time.*.com"
        - "+.pool.ntp.org"
        - "+.ntp.tencent.com"
        - "+.ntp1.aliyun.com"
        - "+.ntp.ntsc.ac.cn"
        - "+.cn.ntp.org.cn"
    default-nameserver:
        - 223.5.5.5
    proxy-server-nameserver:
        - https://dns.alidns.com/dns-query
    # nameseverå°½é‡ç”¨è¿è¥å•†æä¾›çš„DNS
    nameserver:
        - 223.5.5.5
        - 119.29.29.29

# å›½å®¶åˆ—è¡¨
country_pr:
    &country_pr [
        "[è‡ªåŠ¨]-æ–°åŠ å¡ğŸ‡¸ğŸ‡¬",
        "[è‡ªåŠ¨]-æ—¥æœ¬ğŸ‡¯ğŸ‡µ",
        "[è‡ªåŠ¨]-å°æ¹¾ğŸï¸",
        "[è‡ªåŠ¨]-ç¾å›½ğŸ‡ºğŸ‡¸",
        "âœˆï¸ æ‰‹åŠ¨é€‰æ‹©",
    ]
# äºšæ´²å›½å®¶åˆ—è¡¨ï¼ˆç”±äºåœ°ç†ä½ç½®ï¼Œä¸€èˆ¬ä¼šæ›´å¿«ï¼‰
asia_pr: &asia_pr ["[è‡ªåŠ¨]-å°æ¹¾ğŸï¸", "[è‡ªåŠ¨]-æ–°åŠ å¡ğŸ‡¸ğŸ‡¬", "[è‡ªåŠ¨]-æ—¥æœ¬ğŸ‡¯ğŸ‡µ"]
with_global:
    &with_global [
        "ğŸš€ å›½å¤–æµé‡",
        "[è‡ªåŠ¨]-æ–°åŠ å¡ğŸ‡¸ğŸ‡¬",
        "[è‡ªåŠ¨]-æ—¥æœ¬ğŸ‡¯ğŸ‡µ",
        "[è‡ªåŠ¨]-å°æ¹¾ğŸï¸",
        "[è‡ªåŠ¨]-ç¾å›½ğŸ‡ºğŸ‡¸",
        "[è‡ªåŠ¨]-é¦™æ¸¯ğŸ‡­ğŸ‡°",
        "âœˆï¸ æ‰‹åŠ¨é€‰æ‹©",
        "ğŸ‡¨ğŸ‡³ ç›´è¿",
    ]

with_normal: &with_normal ["ğŸš€ å›½å¤–æµé‡", "ğŸ‡¨ğŸ‡³ ç›´è¿"]

# å‡ºç«™ç­–ç•¥
proxy-groups:
    # å¸¸ç”¨
    - {
          name: "ğŸš€ å›½å¤–æµé‡",
          type: select,
          proxies: ["[è‡ªåŠ¨]-é€Ÿåº¦æœ€ä¼˜âš¡ï¸", "âœˆï¸ æ‰‹åŠ¨é€‰æ‹©", "ğŸ‡¨ğŸ‡³ ç›´è¿"],
      }
    - {
          name: "âœˆï¸ æ‰‹åŠ¨é€‰æ‹©",
          type: select,
          include-all: true,
          filter: "^(?!.*@)",
      }
    - { name: "ğŸŸ æ¼ç½‘ä¹‹é±¼", type: select, proxies: ["ğŸš€ å›½å¤–æµé‡", "ğŸ‡¨ğŸ‡³ ç›´è¿"] }

    # å•ç‹¬çš„åº”ç”¨
    - { name: "[å•]-TikTokğŸµ", type: select, proxies: *country_pr }
    - { name: "[å•]-TelegramğŸ“²", type: select, proxies: *with_global }
    - { name: "[å•]-NetflixğŸ¥", type: select, proxies: *country_pr }
    - {
          name: "[å•]-WhatsAppğŸ’¬",
          type: select,
          proxies: *with_normal,
          include-all: true,
          filter: "(?=(å°|TW|å¡|ç‹®åŸ|SG|KR|éŸ©|æ—¥|JP|Japan|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|ç¾|HK|é¦™æ¸¯))",
      }
    - {
          name: "[å•]-CursorğŸ¶",
          type: select,
          proxies: ["ğŸ‡¨ğŸ‡³ ç›´è¿", "ğŸš€ å›½å¤–æµé‡", "[ç±»]-æµ·å¤–AIğŸ¤–"],
      }
    - { name: "[å•]-YouTubeğŸ“¹", type: select, proxies: *with_global }
    - {
          name: "[å•]-ShopeeğŸ›ï¸",
          type: select,
          proxies: *asia_pr,
          include-all: true,
          filter: "(?=(å°|TW|å¡|ç‹®åŸ|SG|KR|éŸ©å›½|æ—¥|JP|Japan|ğŸ‡»ğŸ‡³|VN))",
      }
    - {
          name: "[å•]-FacebookğŸ‘¥",
          type: select,
          proxies: *with_normal,
          include-all: true,
          filter: "(?=(å°|TW|å¡|ç‹®åŸ|SG|KR|éŸ©|æ—¥|JP|Japan|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|ç¾|HK|é¦™æ¸¯))",
      }
    - {
          name: "[å•]-LinkedInğŸ‘¥",
          type: select,
          proxies: *with_normal,
          include-all: true,
          filter: "(?=(å°|TW|å¡|ç‹®åŸ|SG|KR|éŸ©|æ—¥|JP|Japan|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|ç¾|HK|é¦™æ¸¯))",
      }

    # ç±»ç­–ç•¥
    - {
          name: "[ç±»]-æµ·å¤–AIğŸ¤–",
          type: select,
          proxies: *asia_pr,
          include-all: true,
          filter: "(?=(å°|TW|å¡|ç‹®åŸ|SG|KR|éŸ©å›½|æ—¥|JP|Japan|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬))",
      }
    - {
          name: "[ç±»]-AppleCNğŸ",
          type: select,
          proxies: ["ğŸ‡¨ğŸ‡³ ç›´è¿", "ğŸš€ å›½å¤–æµé‡"],
      }

    # è‡ªåŠ¨æµ‹é€Ÿ
    - {
          name: "[è‡ªåŠ¨]-é€Ÿåº¦æœ€ä¼˜âš¡ï¸",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "(^(?!.*(US|è·|æ²™ç‰¹|ç¾|è‹±|DE|æ¾³|å·´è¥¿|åŠ æ‹¿å¤§|æ³°|é©¬æ¥|å¾·|ä¸“ç”¨|1\\.5|å€ç‡:2|ç›´è¿|Emby|åœŸ|@)).*)",
      }
    - {
          name: "[è‡ªåŠ¨]-é¦™æ¸¯ğŸ‡­ğŸ‡°",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "(?=(æ¸¯|HK|Hong|ğŸ‡­ğŸ‡°))(?!.*(1\\.5|å€ç‡:2))",
      }
    - {
          name: "[è‡ªåŠ¨]-æ—¥æœ¬ğŸ‡¯ğŸ‡µ",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "(?=(æ—¥|JP|Japan))",
      }
    - {
          name: "[è‡ªåŠ¨]-å°æ¹¾ğŸï¸",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "(?=(å°|TW|Taiwan|wan))",
      }
    - {
          name: "[è‡ªåŠ¨]-ç¾å›½ğŸ‡ºğŸ‡¸",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "^(?!.*@.*)(?=.*(?:ç¾|US|States|America|ğŸ‡ºğŸ‡¸))",
      }
    - {
          name: "[è‡ªåŠ¨]-æ–°åŠ å¡ğŸ‡¸ğŸ‡¬",
          type: url-test,
          include-all: true,
          tolerance: 23,
          interval: 200,
          filter: "(?=(å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬))(?!.*(1\\.5|å€ç‡:2|ç”¨))",
      }

# è§„åˆ™åŒ¹é…
# æ­¤è§„åˆ™éƒ¨åˆ†æ²¡æœ‰åšé˜²æ³„éœ²å¤„ç†ï¼Œå› ä¸ºå¼Šä¸¥é‡å¤§äºåˆ©ï¼
# é‡è¦ä¸”éœ€è¦ç²¾ç¡®æ§åˆ¶çš„è§„åˆ™æ”¾åœ¨å‰é¢
rules:
    - IP-CIDR,192.168.0.0/16,DIRECT
    - IP-CIDR,10.0.0.0/8,DIRECT
    - IP-CIDR,172.16.0.0/12,DIRECT
    - IP-CIDR,127.0.0.0/8,DIRECT

    # è§„åˆ™é›†
    - RULE-SET,private_domain,DIRECT
    - RULE-SET,whatsapp_domain,[å•]-WhatsAppğŸ’¬
    - RULE-SET,shopee_domain,[å•]-ShopeeğŸ›ï¸
    - RULE-SET,cursor_domain,[å•]-CursorğŸ¶
    - RULE-SET,youtube_domain,[å•]-YouTubeğŸ“¹
    - RULE-SET,tiktok_domain,[å•]-TikTokğŸµ
    - RULE-SET,telegram_domain,[å•]-TelegramğŸ“²
    - RULE-SET,netflix_domain,[å•]-NetflixğŸ¥
    - RULE-SET,facebook_domain,[å•]-FacebookğŸ‘¥
    - RULE-SET,linkedin_domain,[å•]-LinkedInğŸ‘¥
    - RULE-SET,cn_domain,DIRECT
    - RULE-SET,china_only,DIRECT
    - RULE-SET,cn_ip,DIRECT
    - RULE-SET,ai,[ç±»]-æµ·å¤–AIğŸ¤–
    - RULE-SET,apple_domain,[ç±»]-AppleCNğŸ
    - RULE-SET,proxylite,ğŸš€ å›½å¤–æµé‡
    - RULE-SET,gfw_domain,ğŸš€ å›½å¤–æµé‡
    - RULE-SET,geolocation-!cn,ğŸš€ å›½å¤–æµé‡
    - RULE-SET,netflix_ip,[å•]-NetflixğŸ¥,no-resolve
    - RULE-SET,telegram_ip,[å•]-TelegramğŸ“²,no-resolve
    - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†
rule-anchor:
    ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
    domain:
        &domain { type: http, interval: 86400, behavior: domain, format: mrs }
    class:
        &class {
            type: http,
            interval: 86400,
            behavior: classical,
            format: text,
        }

# æ’åœ¨å‰é¢çš„ï¼Œä¼šä¼˜å…ˆä½œç”¨
rule-providers:
    # å•åº”ç”¨
    cursor_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cursor.mrs",
        }
    youtube_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs",
        }
    telegram_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs",
        }
    netflix_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs",
        }
    apple_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs",
        }
    tiktok_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs",
        }
    shopee_domain:
        {
            <<: *domain,
            url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/shopee.mrs",
        }
    facebook_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/facebook.mrs",
        }
    whatsapp_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/whatsapp.mrs",
        }
    linkedin_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/linkedin.mrs",
        }

    # ä¸€ç±»åº”ç”¨
    private_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs",
        }
    proxylite:
        {
            <<: *class,
            url: "https://raw.githubusercontent.com/qichiyuhub/rule/refs/heads/main/proxy.list",
        }
    china_only:
        {
            <<: *class,
            url: "https://raw.githubusercontent.com/zzy333444/passwall_rule/main/list/china_only.list",
        }
    ai:
        {
            <<: *domain,
            url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.mrs",
        }

    gfw_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs",
        }
    geolocation-!cn:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs",
        }
    cn_domain:
        {
            <<: *domain,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs",
        }

    cn_ip:
        {
            <<: *ip,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs",
        }
    telegram_ip:
        {
            <<: *ip,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs",
        }
    netflix_ip:
        {
            <<: *ip,
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs",
        }
